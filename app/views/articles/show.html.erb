<p id="notice"><%= notice %></p>

<table>

  <%= render 'article', article: @article, locals: { show_description?: true, show_comments?: false } %>

  <tr>
    <td></td>
    <td>
      <% if user_signed_in? %>
      <%= render '/comments/form', comment: @comment %>
      <% else %>
      <p><%= link_to 'Sign In', new_user_session_path %> to comment.</p>
      <% end %>
    </td>
  </tr>

  <% @article.comments.order(created_at: :desc).each do |comment| %>
  <tr>
    <td></td>
    <td>
      <small>
        <strong><%= link_to comment.user.username, user_path(comment.user.username) %></strong>
        <% if comment.user == @article.user %>[OP]<% end %>
        posted <%=  time_ago_in_words(comment.created_at) %> ago
        <% if user_signed_in? && current_user == comment.user %>
        | <%= link_to 'Edit', edit_comment_path(comment) %>
        | <%= link_to 'Destroy', comment, method: :delete, data: { confirm: 'Are you sure?' } %>
        <% end %>
      </small><br />
      <%= comment.body %>
    </td>
  </tr>
  <% end %>
</table>
